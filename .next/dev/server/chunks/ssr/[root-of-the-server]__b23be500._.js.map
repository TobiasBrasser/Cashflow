{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/tobiasbrasser/Projects/Cashflow/src/pages/index.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nconst getMonthKey = (date) => {\n  const d = new Date(date)\n  return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`\n}\n\nconst formatMonth = (key) => {\n  const [year, month] = key.split('-')\n  return new Date(year, month - 1).toLocaleDateString('de-CH', {\n    month: 'long',\n    year: 'numeric'\n  })\n}\n\nexport default function Home() {\n  const [transactions, setTransactions] = useState([])\n  const [budget, setBudget] = useState(0)\n\n  useEffect(() => {\n    const loadData = () => {\n      const storedTransactions =\n        JSON.parse(localStorage.getItem('cashflowr-transactions')) || []\n      setTransactions(storedTransactions)\n\n      const storedBudget = localStorage.getItem('cashflowr-budget')\n      if (storedBudget) setBudget(Number(storedBudget))\n    }\n\n    loadData()\n    window.addEventListener('storage', loadData)\n    return () => window.removeEventListener('storage', loadData)\n  }, [])\n\n  const handleBudgetChange = (value) => {\n    const numericValue = Number(value)\n    setBudget(numericValue)\n    localStorage.setItem('cashflowr-budget', numericValue)\n  }\n\n  const monthlyOverview = transactions.reduce((acc, t) => {\n    const month = getMonthKey(t.date)\n    if (!acc[month]) acc[month] = { income: 0, expense: 0 }\n\n    if (t.type === 'income') acc[month].income += t.amount\n    else acc[month].expense += t.amount\n\n    return acc\n  }, {})\n\n  const currentMonthKey = getMonthKey(new Date())\n  const currentMonthData = monthlyOverview[currentMonthKey]\n\n  return (\n    <>\n      <h1>Monatsübersicht</h1>\n      <p className=\"monthly-overview-text\">\n        Behalte deine Einnahmen und Ausgaben im Überblick.\n      </p>\n\n      <div className=\"card mb-4\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">Monatliches Budget</h5>\n          <div className=\"row align-items-center\">\n            <div className=\"col-md-4\">\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                placeholder=\"Budget in CHF\"\n                value={budget || ''}\n                onChange={(e) => handleBudgetChange(e.target.value)}\n              />\n            </div>\n\n            {currentMonthData && budget > 0 && (\n              <div className=\"card-text col-md-8 mt-3 mt-md-0\">\n                <strong>Einnahmen:</strong>{' '}\n                <span className=\"text-success\">\n                  {currentMonthData.income.toFixed(2)} CHF\n                </span>{' '}\n                | <strong>Ausgaben:</strong>{' '}\n                <span className=\"text-danger\">\n                  {currentMonthData.expense.toFixed(2)} CHF\n                </span>{' '}\n                | <strong>Verbleibend:</strong>{' '}\n                <span\n                  className={\n                    budget - currentMonthData.expense >= 0\n                      ? 'text-success'\n                      : 'text-danger'\n                  }\n                >\n                  {(budget - currentMonthData.expense).toFixed(2)} CHF\n                </span>\n              </div>\n            )}\n          </div>\n\n          {currentMonthData &&\n            budget > 0 &&\n            currentMonthData.expense > budget && (\n              <div className=\"alert alert-danger mt-3\">\n                ⚠️ Budget für diesen Monat überschritten!\n              </div>\n            )}\n        </div>\n      </div>\n\n      <div className=\"horizontal-scroll\">\n      <table className=\"table table-striped responsive-table\">\n        <thead>\n          <tr>\n            <th>Monat</th>\n            <th>Einnahmen (CHF)</th>\n            <th>Ausgaben (CHF)</th>\n            <th>Saldo (CHF)</th>\n            <th className=\"col-secondary\">Budgetstatus</th>\n          </tr>\n        </thead>\n        <tbody>\n          {Object.entries(monthlyOverview).map(([month, data]) => {\n            const saldo = data.income - data.expense\n            const remaining = budget - data.expense\n            const isOverBudget = budget > 0 && remaining < 0\n\n            return (\n              <tr key={month}>\n                <td>{formatMonth(month)}</td>\n                <td className=\"text-success\">+ {data.income.toFixed(2)}</td>\n                <td className=\"text-danger\">- {data.expense.toFixed(2)}</td>\n                <td className={saldo >= 0 ? 'text-success' : 'text-danger'}>\n                  {saldo.toFixed(2)}\n                </td>\n                <td className=\"col-secondary\">\n                  {budget > 0 ? (\n                    <span\n                      className={`badge ${\n                        isOverBudget ? 'bg-danger' : 'bg-success'\n                      }`}\n                    >\n                      {isOverBudget\n                        ? `❌ Überschritten (-${Math.abs(remaining).toFixed(\n                            2\n                          )} CHF)`\n                        : `✅ OK (+${remaining.toFixed(2)} CHF)`}\n                    </span>\n                  ) : (\n                    <span className=\"text-muted\">–</span>\n                  )}\n                </td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n      </div>\n\n      {transactions.length === 0 && (\n        <div className=\"alert alert-info mt-4\">\n          Noch keine Transaktionen vorhanden.\n        </div>\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}